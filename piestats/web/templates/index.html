{% extends "layout.html" %}

{% block morehead %}
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>-->

<script src="{{url_for('static', filename='ChartNew.js')}}"></script>
{% endblock %}

{% block title %}
Stats Overview
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-xs-6  col-sm-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Kills this week</h3>
      </div>
      <div class="panel-body" style="text-align: center;" id="chart_latest_kills_parent">
        <canvas id="chart_latest_kills" width="500" height="200"></canvas>
      </div>
    </div>
  </div>

  <div class="col-xs-6  col-sm-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Top countries</h3>
      </div>
      <div class="panel-body" style="text-align: center;">
        <canvas id="chart_top_countries" width="500" height="200"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
  // Our latest kills line chart
  var killsCtx = document.getElementById('chart_latest_kills').getContext('2d');
  var data = {
    labels: {{killsperdate.keys()[::-1]|safe}},
    datasets: [
      {
        label: 'Kills per day',
        fillColor: 'rgba(220,220,220,0.2)',
        strokeColor: 'rgba(220,220,220,1)',
        pointColor: 'rgba(220,220,220,1)',
        pointStrokeColor: '#fff',
        pointHighlightFill: '#fff',
        pointHighlightStroke: 'rgba(220,220,220,1)',
        data: {{killsperdate.values()[::-1]|safe}}
      }
    ]
  };
  var latestKillsChart = new Chart(killsCtx).Line(data, {animation: false});


  // Our top countries pie chart
  var countriesCtx = document.getElementById('chart_top_countries').getContext('2d');

  var data = {{topcountries|safe}};
  var topCountriesChart = new Chart(countriesCtx).Pie(data, {animation: false, legend: true, legendBorders:false});

</script>
{% endblock %}
